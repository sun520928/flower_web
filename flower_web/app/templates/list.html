{% extends "base.html" %}

{% block title %}
{{super()}}
{% endblock %}

{% block css %}
<link rel="stylesheet" href="{{ url_for('static', filename='bootstrap/css/bootstrap.min.css') }}" />
<link rel="stylesheet" href="{{ url_for('static', filename='bootstrap-table/dist/bootstrap-table.min.css') }}" />
<link rel="stylesheet" href="{{ url_for('static', filename='css/list.css') }}" />
{% endblock %}

{% block js %}
<script src="{{ url_for('static', filename='js/jquery-2.1.4.min.js') }}"></script>
<script src="{{ url_for('static', filename='bootstrap/js/bootstrap.min.js') }}"></script>
<script src="{{ url_for('static', filename='bootstrap-table/dist/bootstrap-table.min.js') }}"></script>
<script src="{{ url_for('static', filename='bootstrap-table/dist/locale/bootstrap-table-zh-CN.min.js') }}"></script>
{% endblock %}

{% block body %}

<div class="panel-body" style="padding-bottom:0px;">     
    <div id="toolbar" class="btn-group">
        <button id="btn_add" type="button" class="btn btn-default">
            <span class="glyphicon glyphicon-plus" aria-hidden="true"></span>新增
        </button>
        <button id="btn_edit" type="button" class="btn btn-default">
            <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>修改
        </button>
        <button id="btn_delete" type="button" class="btn btn-default">
            <span class="glyphicon glyphicon-remove" aria-hidden="true"></span>删除
        </button>
    </div>
    <table id="table"></table>
</div>

<script type="text/javascript">
function get_cols() {
    var cols_json = JSON.parse('{{headers|tojson}}');
    var cols = [];
    for(var i=0; i < cols_json.length; i++) {
        cols.push({title: cols_json[i]['title'], field: cols_json[i]['field'], align: cols_json[i]['align']});
    }
    return cols;
};

$('#table').bootstrapTable({
    method: 'get',
    url: '{{url}}',
    dataType: "json",
    pagination: true, //前端处理分页
    singleSelect: false,//是否只能单选
    search: true, //显示搜索框，此搜索是客户端搜索，不会进服务端，所以，个人感觉意义不大
    toolbar: '#toolbar', //工具按钮用哪个容器
    striped: true, //是否显示行间隔色
    cache: false, //是否使用缓存，默认为true，所以一般情况下需要设置一下这个属性（*）
    pageNumber: 1, //初始化加载第10页，默认第一页
    pageSize: 10, //每页的记录行数（*）
    pageList: [10, 20, 50, 100], //可供选择的每页的行数（*）
    strictSearch: true,//设置为 true启用 全匹配搜索，false为模糊搜索
    showColumns: true, //显示内容列下拉框
    showRefresh: true, //显示刷新按钮
    minimumCountColumns: 2, //当列数小于此值时，将隐藏内容列下拉框
    clickToSelect: true, //设置true， 将在点击某行时，自动勾选rediobox 和 checkbox
    height: 'auto', //表格高度，如果没有设置height属性，表格自动根据记录条数决定表格高度#}
    uniqueId: "id", //每一行的唯一标识，一般为主键列
    showToggle: true, //是否显示详细视图和列表视图的切换按钮
    cardView: false, //是否显示详细视图
    sidePagination: "server", //分页方式：client客户端分页，server服务端分页（*）
    columns: get_cols(),
    pagination: true,
});
</script>
{% endblock %}